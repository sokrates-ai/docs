(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55],{9332:(e,s,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/self-hosting/hosting-guide",function(){return n(2884)}])},2884:(e,s,n)=>{"use strict";n.r(s),n.d(s,{__toc:()=>a,default:()=>c});var o=n(5893),r=n(2673),i=n(2643),l=n(208);let a=[{depth:2,value:"Prerequisites",id:"prerequisites"},{depth:2,value:"Step by step",id:"step-by-step"},{depth:3,value:"Install Docker",id:"install-docker"},{depth:3,value:"Download the Sokrates repository",id:"download-the-sokrates-repository"},{depth:4,value:"Go to the directory",id:"go-to-the-directory"},{depth:3,value:"Configure NextAuth",id:"configure-nextauth"},{depth:3,value:"Build and run Sokrates",id:"build-and-run-sokrates"},{depth:3,value:"Access Sokrates",id:"access-sokrates"},{depth:4,value:"Login to your account",id:"login-to-your-account"},{depth:4,value:"Change your password",id:"change-your-password"},{depth:3,value:"You're all set!",id:"youre-all-set"},{depth:2,value:"Further configuration",id:"further-configuration"},{depth:3,value:"Environment variables usage with the Sokrates Docker image",id:"environment-variables-usage-with-the-sokrates-docker-image"},{depth:2,value:"Found bugs ?",id:"found-bugs-"}];function t(e){let s=Object.assign({h1:"h1",p:"p",ul:"ul",li:"li",a:"a",h2:"h2",h3:"h3",pre:"pre",code:"code",span:"span",h4:"h4",strong:"strong"},(0,i.a)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h1,{children:"Self hosting guide"}),"\n",(0,o.jsx)(s.p,{children:"We use Docker & Docker Compose to run Sokrates, this makes it easy to run the application on any machine that has Docker installed."}),"\n",(0,o.jsx)(s.p,{children:"Tested on:"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:"macOS Sonoma"}),"\n",(0,o.jsx)(s.li,{children:"Ubuntu 23.04 Lunar lobster"}),"\n",(0,o.jsx)(s.li,{children:"(Need testers on Windows)"}),"\n"]}),"\n",(0,o.jsx)(l.UW,{type:"info",emoji:"\uD83D\uDEE0",children:(0,o.jsxs)(s.p,{children:["Interested in helping test on Windows? Join our ",(0,o.jsx)(s.a,{href:"https://discord.com/invite/CMyZjjYZ6x",children:"Discord"})," community."]})}),"\n",(0,o.jsx)(s.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://docs.docker.com/get-docker/",children:"Docker"})}),"\n",(0,o.jsx)(s.li,{children:"At least 4 GB of RAM allocated to the container runtime"}),"\n"]}),"\n",(0,o.jsx)(s.h2,{id:"step-by-step",children:"Step by step"}),"\n",(0,o.jsxs)(l.Rg,{children:[(0,o.jsx)(s.h3,{id:"install-docker",children:"Install Docker"}),(0,o.jsxs)(s.p,{children:["To install Docker, follow the instructions for your operating system on the ",(0,o.jsx)(s.a,{href:"https://docs.docker.com/get-docker/",children:"Docker website"}),"."]}),(0,o.jsx)(s.h3,{id:"download-the-sokrates-repository",children:"Download the Sokrates repository"}),(0,o.jsx)(s.pre,{"data-language":"bash","data-theme":"default",hasCopyCode:!0,children:(0,o.jsx)(s.code,{"data-language":"bash","data-theme":"default",children:(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"git"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"clone"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"https://github.com/sokrates-ai/platform"})]})})}),(0,o.jsx)(s.h4,{id:"go-to-the-directory",children:"Go to the directory"}),(0,o.jsx)(s.pre,{"data-language":"shell","data-theme":"default",hasCopyCode:!0,children:(0,o.jsx)(s.code,{"data-language":"shell","data-theme":"default",children:(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"cd"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"sokrates"})]})})}),(0,o.jsx)(s.h3,{id:"configure-nextauth",children:"Configure NextAuth"}),(0,o.jsxs)(s.p,{children:["Add these lines to your ",(0,o.jsx)(s.code,{children:".env"})," file. A template is available under ",(0,o.jsx)(s.code,{children:"/extra/example-learnhouse-conf.env"}),"."]}),(0,o.jsxs)(l.UW,{type:"info",children:[(0,o.jsx)(s.p,{children:"To safely encrypt tokens and email hashes, you need a NextAuth secret."}),(0,o.jsxs)(s.p,{children:["To create one, either run ",(0,o.jsx)(s.code,{children:"npx auth secret"}),", or on UNIX based systems (MacOS/Linux) you can use ",(0,o.jsx)(s.code,{children:"openssl rand -base64 33"}),"."]}),(0,o.jsx)(s.p,{children:"Copy this string into your .env file as NEXTAUTH_SECRET="})]}),(0,o.jsx)(s.pre,{"data-language":"env","data-theme":"default",filename:".env",hasCopyCode:!0,children:(0,o.jsxs)(s.code,{"data-language":"env","data-theme":"default",children:[(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"# NextAuth Configuration"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"NEXTAUTH_SECRET={generated_secret}"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"NEXTAUTH_URL=http://localhost:3000/"})})]})}),(0,o.jsx)(s.h3,{id:"build-and-run-sokrates",children:"Build and run Sokrates"}),(0,o.jsx)(s.pre,{"data-language":"shell","data-theme":"default",hasCopyCode:!0,children:(0,o.jsx)(s.code,{"data-language":"shell","data-theme":"default",children:(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"docker-compose"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"up"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"-d"})]})})}),(0,o.jsx)(s.h3,{id:"access-sokrates",children:"Access Sokrates"}),(0,o.jsx)(s.p,{children:"When running the application for the first time, an admin account and organization is created for you, look for the admin credentials in the logs."}),(0,o.jsx)(s.h4,{id:"login-to-your-account",children:"Login to your account"}),(0,o.jsxs)(s.p,{children:["Open your browser and go to ",(0,o.jsx)(s.a,{href:"http://localhost/login",children:"http://localhost/login"})," to access the application."]}),(0,o.jsx)(s.h4,{id:"change-your-password",children:"Change your password"}),(0,o.jsxs)(s.p,{children:["After logging in, don't forget to ",(0,o.jsx)(s.a,{href:"http://localhost/dash/user-account/settings/security",children:"change your password"})]}),(0,o.jsx)(l.UW,{type:"warning",children:(0,o.jsx)(s.p,{children:"It is important to change the default password to a another one, reducing the risk of unauthorized access if your server is compromised."})}),(0,o.jsx)(s.h3,{id:"youre-all-set",children:"You're all set!"}),(0,o.jsx)(s.p,{children:"Thanks for using Sokrates \uD83C\uDF89"})]}),"\n",(0,o.jsx)(s.h2,{id:"further-configuration",children:"Further configuration"}),"\n",(0,o.jsxs)(s.p,{children:["You should be ready to go when following the steps above but if you'd live to enable features like ",(0,o.jsx)(s.strong,{children:"AI"}),", ",(0,o.jsx)(s.strong,{children:"Emails"}),", ",(0,o.jsx)(s.strong,{children:"Multi-org"}),", or customize the application, check the ",(0,o.jsx)(s.a,{href:"/self-hosting/configuration",children:"configuration guide"}),"."]}),"\n",(0,o.jsx)(s.h3,{id:"environment-variables-usage-with-the-sokrates-docker-image",children:"Environment variables usage with the Sokrates Docker image"}),"\n",(0,o.jsx)(s.p,{children:"You can mix frontend and backend env vars defined in the COnfiguration page, in a single file like the one included on the repository (extra/example-learnhouse-conf.env)"}),"\n",(0,o.jsx)(s.pre,{"data-language":"env","data-theme":"default",filename:"extra/example-learnhouse-conf.env",hasCopyCode:!0,children:(0,o.jsxs)(s.code,{"data-language":"env","data-theme":"default",children:[(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"# Frontend"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"NEXT_PUBLIC_LEARNHOUSE_MULTI_ORG=false"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"NEXT_PUBLIC_LEARNHOUSE_DEFAULT_ORG=default"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"# Backend"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"LEARNHOUSE_COOKIE_DOMAIN=.localhost"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"LEARNHOUSE_SQL_CONNECTION_STRING=postgresql://learnhouse:learnhouse@db:5432/learnhouse"})}),"\n",(0,o.jsx)(s.span,{className:"line",children:(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"LEARNHOUSE_REDIS_CONNECTION_STRING=redis://redis:6379/learnhouse"})})]})}),"\n",(0,o.jsx)(s.pre,{"data-language":"yaml","data-theme":"default",filename:"docker-compose.yml",hasCopyCode:!0,children:(0,o.jsxs)(s.code,{"data-language":"yaml","data-theme":"default",children:[(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"app"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"build"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-constant)"},children:"."})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"ports"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"80:80"'})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"volumes"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:".:/usr/learnhouse"})]}),"\n",(0,o.jsxs)(s.span,{className:"line highlighted",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"env_file"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line highlighted",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      - "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"./extra/example-learnhouse-conf.env"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"    "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"depends_on"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"db"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"condition"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"service_healthy"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"      "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"redis"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"})]}),"\n",(0,o.jsxs)(s.span,{className:"line",children:[(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"        "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:"condition"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-keyword)"},children:":"}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,o.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:"service_healthy"})]})]})}),"\n",(0,o.jsx)(s.h2,{id:"found-bugs-",children:"Found bugs ?"}),"\n",(0,o.jsxs)(s.p,{children:["If you find any bugs or have any suggestions, please open an issue on our ",(0,o.jsx)(s.a,{href:"https://github.com/sokrates-ai/platform/issues/new/choose",children:"GitHub repository"}),", we would love to hear from you."]}),"\n",(0,o.jsx)(s.p,{children:"Please include as much information as possible, like the steps to reproduce the bug, the expected behavior and the actual behavior."})]})}let c=(0,r.j)({MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,i.a)(),e.components);return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(t,{...e})}):t(e)},pageOpts:{filePath:"pages/self-hosting/hosting-guide.mdx",route:"/self-hosting/hosting-guide",timestamp:1764945515e3,title:"Self hosting guide",headings:a},pageNextRoute:"/self-hosting/hosting-guide"})}},e=>{var s=s=>e(e.s=s);e.O(0,[673,888,774,179],()=>s(9332)),_N_E=e.O()}]);